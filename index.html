<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>School-Planner</title>
    <link rel="stylesheet" href="main.css" />
  </head>
  <body>
    <div id="title">
      <h1>Schul-Organisations-Web-App</h1>
    </div>
    <div id="container">
      <div id="stundenplaner">
        <table id="stundenplan">
          <thead>
            <tr id="ueberschrift-tabelle">
              <th>Uhrzeit</th>
              <th>Montag</th>
              <th>Dienstag</th>
              <th>Mittwoch</th>
              <th>Donnerstag</th>
              <th>Freitag</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>7:40</td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
            </tr>
            <tr>
              <td>8:30</td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
            </tr>
            <tr>
              <td>9:15</td>
              <td>Pause</td>
              <td>Pause</td>
              <td>Pause</td>
              <td>Pause</td>
              <td>Pause</td>
            </tr>
            <tr>
              <td>9:35</td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
            </tr>
            <tr>
              <td>10:20</td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
            </tr>
            <tr>
              <td>11:05</td>
              <td>Pause</td>
              <td>Pause</td>
              <td>Pause</td>
              <td>Pause</td>
              <td>Pause</td>
            </tr>
            <tr>
              <td>11:25</td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
            </tr>
            <tr>
              <td>12:10</td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
            </tr>
            <tr>
              <td>12:55</td>
              <td>Pause</td>
              <td>Pause</td>
              <td>Pause</td>
              <td>Pause</td>
              <td>Pause</td>
            </tr>
            <tr>
              <td>13:30</td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
            </tr>
            <tr>
              <td>14:15</td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
            </tr>
            <tr>
              <td>15:00</td>
              <td>Pause</td>
              <td>Pause</td>
              <td>Pause</td>
              <td>Pause</td>
              <td>Pause</td>
            </tr>
            <tr>
              <td>15:15</td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
            </tr>
          </tbody>
        </table>

        <br />
        <button onclick="stundenplanSpeichern()">Speichern</button>
        <button onclick="stundenplanLaden()">Laden</button>
        <button onclick="stundenplanZurücksetzen()">Löschen</button>
      </div>

      <div id="hausaufgaben">
        <table id="aufgaben-tabelle">
          <thead>
            <tr id="ueberschrift-aufgaben">
              <th>Erledigt:</th>
              <th>Fach:</th>
              <th>Aufgabe:</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><input type="checkbox" /></td>
              <td contenteditable="true" oninput="farbeAnpassen(this)"></td>
              <td contenteditable="true"></td>
            </tr>
          </tbody>
        </table>
        <button onclick="aufgabeHinzufuegen()">Aufgabe hinzufügen</button>
      </div>
    </div>

    <script>
      function aufgabeHinzufuegen() {
        const tabelle = document
          .getElementById("aufgaben-tabelle")
          .getElementsByTagName("tbody")[0];

        // Neue Zeile erstellen
        const neueZeile = document.createElement("tr");

        // Erste Zelle: Checkbox
        const zelleCheckbox = document.createElement("td");
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        zelleCheckbox.appendChild(checkbox);

        // Zweite Zelle: Fach, contenteditable, oninput Event
        const zelleFach = document.createElement("td");
        zelleFach.contentEditable = "true";
        zelleFach.setAttribute("oninput", "farbeAnpassen(this)");

        // Dritte Zelle: Aufgabe, contenteditable
        const zelleAufgabe = document.createElement("td");
        zelleAufgabe.contentEditable = "true";

        // Zellen an die neue Zeile anhängen
        neueZeile.appendChild(zelleCheckbox);
        neueZeile.appendChild(zelleFach);
        neueZeile.appendChild(zelleAufgabe);

        tabelle.appendChild(neueZeile);
      }

      const zellen = document.querySelectorAll(
        "#stundenplan td[contenteditable]"
      );

      function stundenplanSpeichern() {
        const daten = Array.from(zellen).map((zelle) => zelle.innerText);
        localStorage.setItem("stundenplan", JSON.stringify(daten));
        alert("Stundenplan gespeichert!");
      }

      function stundenplanLaden() {
        const daten = JSON.parse(localStorage.getItem("stundenplan") || "[]");
        zellen.forEach((zelle, i) => {
          zelle.innerText = daten[i] || "";
          farbeAnpassen(zelle);
        });
      }

      function stundenplanZurücksetzen() {
        localStorage.removeItem("stundenplan");
        zellen.forEach((zelle) => (zelle.innerText = ""));
        alert("Stundenplan gelöscht.");
      }

      window.onload = stundenplanLaden;

      function farbeAnpassen(zelle) {
        const inhalt = zelle.innerText.toLowerCase().trim();

        zelle.classList.remove(
          "mathe",
          "deutsch",
          "englisch",
          "informatik",
          "spanisch",
          "sport",
          "musik",
          "erdkunde",
          "chemie",
          "physik",
          "biologie",
          "religion",
          "sowi"
        );

        if (inhalt.includes("mathe")) {
          zelle.classList.add("mathe");
        } else if (inhalt.includes("deutsch")) {
          zelle.classList.add("deutsch");
        } else if (inhalt.includes("englisch")) {
          zelle.classList.add("englisch");
        } else if (inhalt.includes("info") || inhalt.includes("informatik")) {
          zelle.classList.add("informatik");
        } else if (inhalt.includes("spanisch")) {
          zelle.classList.add("spanisch");
        } else if (inhalt.includes("sport")) {
          zelle.classList.add("sport");
        } else if (inhalt.includes("biologie")) {
          zelle.classList.add("biologie");
        } else if (inhalt.includes("physik")) {
          zelle.classList.add("physik");
        } else if (inhalt.includes("chemie")) {
          zelle.classList.add("chemie");
        } else if (inhalt.includes("sowi")) {
          zelle.classList.add("sowi");
        } else if (inhalt.includes("philosophie")) {
          zelle.classList.add("philosophie");
        } else if (inhalt.includes("musik")) {
          zelle.classList.add("musik");
        } else if (inhalt.includes("erdkunde")) {
          zelle.classList.add("erdkunde");
        }
      }
    </script>
  </body>
</html>
